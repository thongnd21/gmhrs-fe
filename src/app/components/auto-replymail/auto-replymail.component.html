<div>
  <mat-tab-group>
    <mat-tab label="Mail Template">
      <div class="card-body">

        <!-- template detail -->
        <div class=" ml-05 mr-05 mt-10 pb-1 pt-08" style="margin-top: 30px;">
          <mat-table [dataSource]="dataSource" matSort>
            <ng-container matColumnDef="count">
              <mat-header-cell *matHeaderCellDef>
                No.
              </mat-header-cell>
              <mat-cell *matCellDef="let row; let i = index" data-label="No.">
                {{ i + 1 }}
              </mat-cell>
            </ng-container>
            <ng-container matColumnDef="templateName">
              <mat-header-cell *matHeaderCellDef mat-sort-header>
                Template Name
              </mat-header-cell>
              <mat-cell *matCellDef="let row" [style.color]="row.color" data-label="color">
                {{ row.templateName }}
              </mat-cell>
            </ng-container>
            <ng-container matColumnDef="status">
              <mat-header-cell *matHeaderCellDef mat-sort-header>
                Status
              </mat-header-cell>
              <mat-cell *matCellDef="let row" [style.color]="row.color" data-label="color">
                <mat-chip-list aria-label="Fish selection">
                  <mat-chip color="accent" selected *ngIf="row.status==true">Applied</mat-chip>
                  <mat-chip *ngIf="row.status==false">Cease</mat-chip>
                </mat-chip-list>
              </mat-cell>
            </ng-container>
            <ng-container matColumnDef="create_at">
              <mat-header-cell *matHeaderCellDef mat-sort-header>
                Created At
              </mat-header-cell>
              <mat-cell *matCellDef="let row" [style.color]="row.color" data-label="color">
                {{ row.create_at }}
              </mat-cell>
            </ng-container>

            <ng-container matColumnDef="action">
              <mat-header-cell *matHeaderCellDef>
                Action
              </mat-header-cell>
              <mat-cell *matCellDef="let row" [style.color]="row.color" data-label="color">
                <!-- view detail account company icon button -->
                <button mat-icon-button (click)="openTemplateDetail(detail, row.templateId)">
                  <mat-icon>
                    remove_red_eye
                  </mat-icon>
                </button>
                <!-- update account company icon button -->
                <button mat-icon-button (click)="syncTemplate(row.templateId)">
                  <mat-icon class="mat-18 mat-color-primary">
                    autorenew
                  </mat-icon>
                </button>
              </mat-cell>
            </ng-container>
            <mat-header-row *matHeaderRowDef="displayedColumns"></mat-header-row>
            <mat-row *matRowDef="let row; columns: displayedColumns"> </mat-row>
          </mat-table>
          <mat-paginator [pageSizeOptions]="[5, 10, 25, 100]"></mat-paginator>
        </div>
      </div>
    </mat-tab>
    <mat-tab label="Assign Auto-reply mail template">
      <div class="card-body">
        <div class="card-body">
          <mat-card class="p-0">
            <mat-card-content>
              <div class="row">
                <div class="col-auto mr-auto">
                  <div>

                  </div>

                </div>
                <div class="col-auto">
                  <button color="primary" mat-button>
                    <mat-icon>
                      create
                    </mat-icon>
                    Assign Email Template
                  </button>
                </div>
              </div>
              <mat-table [dataSource]="dataSource1" matSort>

                <ng-container matColumnDef="name">
                  <mat-header-cell *matHeaderCellDef>
                    Department Name
                  </mat-header-cell>
                  <mat-cell *matCellDef="let row" [style.color]="row.color" data-label="color">
                    {{ row.name }}
                  </mat-cell>
                </ng-container>

                <ng-container matColumnDef="mail_template_name">
                  <mat-header-cell *matHeaderCellDef>
                    Mail Template Name
                  </mat-header-cell>
                  <mat-cell *matCellDef="let row" [style.color]="row.color" data-label="color">
                    <mat-form-field style="width: fit-content;">
                      <mat-select (selectionChange)="changSelectTemplate(row.mail_template_id)" name="selectTemplate" [(ngModel)]="row.mail_template_id">
                        <mat-option [value]='0'>Choose template default</mat-option>
                        <mat-option *ngFor="let template of listTemplate " [value]="template.templateId">
                          {{ template.templateName }}
                        </mat-option>
                      </mat-select>
                    </mat-form-field>
                  </mat-cell>
                </ng-container>
                <ng-container matColumnDef="action">
                  <mat-header-cell *matHeaderCellDef>
                    Action
                  </mat-header-cell>
                  <mat-cell *matCellDef="let row" [style.color]="row.color" data-label="color">
                    <button mat-raised-button color="primary" (click)="routToDetail(row.id)">
                      Setting
                    </button>
                  </mat-cell>
                </ng-container>
                <mat-header-row *matHeaderRowDef="displayedColumns1"></mat-header-row>
                <mat-row *matRowDef="let row; columns: displayedColumns1"> </mat-row>
              </mat-table>
              <mat-paginator [pageSizeOptions]="[5, 10, 25, 100]"></mat-paginator>
            </mat-card-content>
          </mat-card>
        </div>
      </div>
    </mat-tab>
  </mat-tab-group>

  <!-- editor -->

</div>
<div>
  <!-- <app-assign-email-template></app-assign-email-template> -->
</div>

<ng-template #detail let-modal>
  <div class="modal-body">

    <div class="card-body">
      <div class="editor">
        <email-editor (loaded)="editorLoaded($event)"></email-editor>
      </div>
    </div>
  </div>
  <div class="card-footer">
    <div class="button-container  mr-4">
      <!-- <div class="spinner-container" *ngIf="loading">
                <mat-spinner diameter="24"></mat-spinner>
            </div> -->
      <button (click)="editorExport()" mat-raised-button [disabled]="loading">
        Save
      </button>
    </div>
    <button type="button" class="btn btn-danger" (click)="closeModal()">Close</button>
  </div>
</ng-template>

<!-- <div class="editor"> -->
<!-- <button (click)="editorExport()">Export</button>
    <script src="https://editor.unlayer.com/embed.js"></script>
    <div id="editor"></div>
    <script>
        unlayer.init({
        id: 'editor',
        projectId: 5412,
        })
    </script>
    <email-editor (loaded)="editorLoaded($event)" id="email-editor"></email-editor>  -->
<!-- </div>    -->